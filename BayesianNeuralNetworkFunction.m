function [y1] = BayesianNeuralNetworkFunction(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 11-Jan-2017 20:29:44.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx30 matrix, input #1
% and returns:
%   y = Qx2 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [9.878;0;7.33;0.12;0;13.602;-18.066;0.228;0.004;110.601;0.047;-1.414;0;20;-2.496;-3.141;26.001;-2.487;-3.142;0.2;-3.142;22.71;2;30.196;-4.497;-3.142;30;-4.5;-3.142;60.223];
x1_step1.gain = [0.002044318786983;0.00289823569901822;0.00151219242951104;0.00189809687317012;0.235211101964013;0.000403113893582366;0.0575440211761998;0.373761913660998;0.00389366403519872;0.00114819724421179;0.101389029706986;0.707213578500707;2;0.00331750881627968;0.400560785099139;0.318319274232055;0.00458826093439934;0.401123144805455;0.318319274232055;0.00210268902385816;0.318268618714195;0.00100945557032726;2;0.00183422797802962;0.222321031569587;0.318319274232055;0.00289244724176231;0.222222222222222;0.318268618714195;0.0012712860965796];
x1_step1.ymin = -1;

% Layer 1
b1 = [3.3841179969159705;1.4901028957366957;29.59286220096816;-0.19032332791715773;3.5957875336120275;20.855316952568131;-10.214116983994078;-2.6025399850625535;3.6192461216850864;1.5897076055757857];
IW1_1 = [-0.73737352140688239 5.6585081641379924 3.9389492859881674 -4.5931275440495245 0.11481307097778971 -1.9671822816720759 -0.59062487975213096 -1.7930255262998285 -1.136304612932177 0.78537551774549663 0.90687422342381718 1.3068343922580477 -0.017501684891589722 -0.95606740639310472 0.01530965119818747 0.0047363133509293661 -0.55369233305325727 -0.031028826004224717 0.044527314996877169 4.8616203222087826 0.0056053472003689802 0.14179074261265029 0.0048964221009026795 -0.22491564472813141 0.051898798322314386 0.020515954803639207 0.45850323844712759 -0.0038149190996463892 -0.003841912395606193 -0.46592116103624881;-0.066670139166704556 -2.0722278780832859 -1.8490195562893739 1.235689595914532 0.166478692864029 1.098531870989633 0.077310872253742211 0.70773807102260977 1.2495819882173116 1.1187933447127723 -1.6505343402826247 0.18956668291265635 0.030973081766604009 1.2167124589656229 0.014879111475031558 0.0038964460741558013 1.4147149590519463 0.0011278146180382074 -0.0098096247265769335 -0.43384698584669229 -0.0082285906282864221 0.098397684190398654 0.054908015194514444 -0.41904095922566748 0.028643566952114546 -0.023093060395757019 -0.02876770124307345 0.0083964177666166085 -0.020417164511558179 -0.49227640215190765;15.864771846587367 1.0868002167815434 19.822808526697823 3.723854003462415 -0.91881055773348774 3.365872055994227 -0.11308162400912876 0.41969672876308961 -1.0638305335073017 7.3764038023716116 1.3812829568893707 0.30045820908658838 0.21155936893348801 -3.5618239038849921 0.01407887573364161 0.013009264083462214 -4.367241238625307 0.0095759691304328643 -0.0049379975318570761 2.1624861413968395 0.0074105040524268017 -0.76305490809737053 -0.045069727570473408 -2.7997835992204947 0.029849149797232705 0.0087985710453553911 -1.0807123803057586 0.01823602930868579 -0.015419454209510831 -5.4613962171186161;-0.37565036209196939 -1.5999091855064727 -3.4242142189870219 1.7640126611821827 -0.18446689091204449 1.9593477908401473 -0.24720006425309377 0.85208561743821254 1.5255514721620764 0.79629095393249871 -2.9813608181630773 0.24999688396053987 0.081167306287353191 1.5235693889023956 -0.64286381699343698 0.042568871174901331 2.6703814688987513 0.77739122813264128 -0.021434267166184635 -1.1970281326830006 -0.011250257062693291 0.94797083681111327 0.072320468832795984 -0.88038004103663792 -0.025758197517532444 0.024721662305962608 -0.78759857493867169 -0.084878941609826342 -0.04373118343563441 -0.33182384581438668;-0.13996199400371784 1.8679646288609506 11.091076019688954 0.6673599426407274 1.1109817797701305 -5.1222167125263081 0.19372256505915697 1.9468234024397324 0.94930746185593362 -2.9369494162313932 1.906091294397608 0.19217777196897889 -0.21780323090001569 -6.8122743880127672 0.064510140897094503 0.01125380814719729 -2.36394393891154 -0.027321144012633036 0.011284538825939843 -1.2411114007224671 -0.10491000141969664 -0.78832363920771009 -0.11150095309424081 6.0911071958861394 -0.012411070893411652 -0.0766665828409583 3.5930048077738896 0.055636174322820489 0.011544541076380187 -1.9538890082123048;5.6178652880881135 5.1708970585183955 20.860162473411954 0.76785920416304876 0.14909183628463407 -2.4794885658646595 -0.29476889722554689 0.55957957692786853 -0.48329772969026663 3.7903713080368391 3.4914386349786599 -0.084564050178660713 -0.016559406481037188 -6.1135359457884544 0.086982266168383046 -0.025606243847211409 -6.1453511027664085 0.022310272911033855 -0.0169899214660994 3.6391438914157166 0.0032082602944467188 0.86345293145686819 0.11438534553545399 -0.034307905957676785 -0.029029597080177542 -0.0063902136551755627 -0.050503984142430902 -0.047107409374358304 0.0089999702078373857 -3.1753238421102559;-0.62943425938452757 0.720767170198094 1.8974070403317647 -0.65666907736457369 0.15438060525116187 0.7304212886177438 0.43991879237374737 -0.19048364674191459 2.232918362331453 -7.4388100395802468 3.0918173419901236 -0.097548980476957342 0.037117388718806613 -2.1188066664080072 0.08313502310220032 -0.038903437688600731 -2.7884951406779872 0.067594514833631783 0.010247495520076462 1.3275110302561206 0.019039937466602517 -1.5888388196005616 0.022199590382848813 -2.9835604764144232 -0.029486801052385044 0.018765006566900461 1.2220731334298855 -0.11151351975386115 -0.020149499621796588 -1.0583658576698369;0.52649250551305704 2.2697797806066409 2.4296958502781045 -0.85865206435375685 0.11530621609386939 -1.4779650139221063 0.25215378329924359 -0.79006509164311378 -1.9277240650665737 -1.9569195811535629 2.1862943775537791 -0.27300244752176683 -0.032079831444678193 -2.6608724600069555 -0.57533050663725938 0.028860046834618142 -2.4212562290270232 0.63371041088171998 0.026475917264330448 -0.00081158594601605377 0.0071561816791676502 0.8198697972914023 -0.078268069537251295 0.35989578555620627 -0.09011402976110458 0.098112100523788146 -0.51350689328807797 -0.072314920862235343 0.020670286037272428 0.94351962862959382;1.0966994149699936 -2.7183353641992518 6.1921482285611136 0.18216759740512758 -1.9853813413354144 2.932701008913313 -0.42119843624971093 -0.99445220986727989 -1.5838000659945894 4.2579723772142781 0.3533785126329132 0.098053977536113834 -0.28396447706117228 -0.52961274898325517 -0.0087434903316905427 0.027041236869084828 -1.8623592916711353 0.0027750499997007336 -0.015380315927473971 4.4189400499625862 0.033671707908981108 2.4362007803823058 0.083467233421225154 -9.040189316779685 0.098324514364868498 0.034897566666312885 -5.1519041041939522 0.086922511998800245 -0.0040203194834835358 3.4530380503442539;-0.015265359565687156 -2.732312309073138 -2.050071158268973 1.3250173615764096 0.25058387467626309 1.5626273794697227 0.15634570577503659 0.62661474125748418 1.1313850886310426 1.2415872895590798 -1.731095200619251 0.24879900811780514 0.037758572490181865 1.1341951623424207 0.007600463074675534 0.0080221500712935861 1.6012357099527408 -0.0089284288505110821 -0.0044670458931668384 -0.42531028883340916 -0.011630900476032605 -0.038381382896929404 0.04229718796884592 -0.48528202755857464 0.041008890823441252 -0.022799661377135867 -0.13292668191928325 0.025501643894037144 -0.025597418171526699 -0.34481786035231182];

% Layer 2
b2 = [2.4862168722941842;2.2071038369280478];
LW2_1 = [-0.090724751045643204 -2.0863652949738176 -0.046851354407283691 0.19012060923245655 0.13094485079776233 0.12465973038448047 3.3645915661198429 -0.21767226220010891 0.14328604510865861 1.5931357812990603;-0.13807135633588211 -3.4497393937078313 -1.0142970228215547 0.40551570072475596 0.14558168433601756 1.0430381599296792 2.0468256230060526 -0.45279327745948661 0.75323824001027539 2.7346176041755625];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.256294165406702;2];
y1_step1.xoffset = [0.00150187015894;0];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
